<div id=D__ID>
	<div class="container mt-95 mb-3">
    	<div class="row" >
			<div class="col-12 col-lg-7 col-md-11 col-sm-12 mx-auto formbox">
        		<div class="row">
            		<div class="col-12">
						<form id=F__ID>
							<h3 class="text-center">Select a Project</h3>
							<div class="form-group">
								<div class="questiongroup ">
								   <fieldset class="subquestions">
									   <label class=""><span class="">Project Code</span>
										   <input class="form-control" data-id="Project_Code" name="Project_Code" id=Project_Code__ID placeholder="Select Project Code" type="text" required >
									   </label><br>
								   </fieldset>
							   </div>
							   <div class="questiongroup ">
								   <fieldset class="subquestions">
									   <label class=""><span class=""></span>
										 	<button id=button_project__ID type="button" class="btn btn-success">Project Details</button>
									   </label>
								   </fieldset>
								   <fieldset class="subquestions">
									   <label class=""><span class=""></span>
										 	<button id=button_document__ID type="button" class="btn btn-success">Documents</button>
									   </label>
								   </fieldset>
								   <fieldset class="subquestions">
									   <label class=""><span class=""></span>
										 	<button id=button_proposal__ID type="button" class="btn btn-success">Proposal and Variation</button>
									   </label>
								   </fieldset>
								   <fieldset class="subquestions">
									   <label class=""><span class=""></span>
										 	<button id=button_actual_spending__ID type="button" class="btn btn-success">Actual Spending</button>
									   </label>
								   </fieldset>
								   <fieldset class="subquestions">
									   <label class=""><span class=""></span>
										 	<button id=button_pending_funds__ID type="button" class="btn btn-success">Pending Funds (Still active?)</button>
									   </label>
								   </fieldset>
								   <fieldset class="subquestions">
									   <label class=""><span class=""></span>
										 	<button id=button_budget_history__ID type="button" class="btn btn-info">Budget History</button>
									   </label>
								   </fieldset>
								   <fieldset class="subquestions">
									   <label class=""><span class="">Financial Year</span>
										   <select class="form-control" name="FY" id="FY__ID" ></select>
									   </label>
								   </fieldset>
								   <fieldset class="subquestions">
									   <label class=""><span class=""></span>
										   <button id=budget_and_actual_by_source__ID type="button" class="btn btn-info">Budget and Actual by Source</button>
									   </label>
								   </fieldset>
								   <fieldset class="subquestions">
									   <label class=""><span class="">Country</span>
										   <input class="form-control" data-id="Country" name="Country" id=Country__ID placeholder="Select Country" type="text" >
									   </label>
								   </fieldset>
								   <fieldset class="subquestions">
									   <label class=""><span class=""></span>
										 	<button id=quarterly_budget_and_actual__ID type="button" class="btn btn-info">Quarterly budget and actual</button>
									   </label>
								   </fieldset>
								   <fieldset class="subquestions">
									   <label class=""><span class=""></span>
										 	<button id=button_quarterly_projection__ID type="button" class="btn btn-success">Quarterly Projection</button>
									   </label>
								   </fieldset>
								   <fieldset class="subquestions">
									   <label class=""><span class=""></span>
										 	<button id=country_project_summary__ID type="button" class="btn btn-info">Country Project Summary</button>
									   </label>
								   </fieldset>
								   <fieldset class="subquestions">
									   <label class=""><span class=""></span>
										 	<button id=country_budget_and_actual_by_source__ID type="button" class="btn btn-info">Country Budget and Actual by Source</button>
									   </label>
								   </fieldset>
								   <fieldset class="subquestions">
									   <label class=""><span class="">Funding Source</span>
										   <input class="form-control" data-id="Source" name="Source" id=Source__ID placeholder="Select Funding Source" type="text" >
									   </label>
								   </fieldset>
								   <fieldset class="subquestions">
									   <label class=""><span class=""></span>
										 	<button id=summary_of_confirmed_funds__ID type="button" class="btn btn-info">Summary of Confirmed Funds</button>
									   </label>
								   </fieldset>
								   <fieldset class="subquestions">
									   <label class=""><span class="">Financial Year Start</span>
										   <select class="form-control" name="FY_start" id="FY_start__ID" ></select>
									   </label>
									   <label class=""><span class="">Financial Year End</span>
										   <select class="form-control" name="FY_end" id="FY_end__ID" ></select>
									   </label>
								   </fieldset>
								   <fieldset class="subquestions">
									   <label class=""><span class=""></span>
										 	<button id=country_budget_summary__ID type="button" class="btn btn-info">Country Budget Summary</button>
									   </label>
								   </fieldset>
								   <fieldset class="subquestions">
									   <label class=""><span class=""></span>
										 	<button id=country_actual_summary__ID type="button" class="btn btn-info">Country Actual Summary</button>
									   </label>
								   </fieldset>
						   		</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
<script>
	function F__ID(){
		//-------------------------------------
		//VmI nclude:__COMPONENT__/module/form.v1.js
		VmInclude:__CURRENT_PATH__/task_form.js
		//-------------------------------------
		if($vm.module==undefined) $vm.module={};
		$vm.module["__ID"]={};
		var m=$vm.module["__ID"];
		m.name=$vm.vm['__ID'].name;
		m.input=$vm.vm['__ID'].input; if(m.input==undefined) m.input={};
		m.module=$vm.module_list[m.name];
		m.preload=m.module.preload;
		m.prefix=m.module.prefx; if(m.prefix==undefined) m.prefix="";
		m.form_module=m.prefix+m.module.form_module;
		m.db_pid=m.module.table_id;
		//-------------------------------------
		sql="with tb as (select name=@('Project_Code'),value3=@('Project_Status'),value2=uid from [TABLE-"+$vm.module_list['project-form'].table_id+"])";
		sql+=" select top 10 name,value=name,value2,value3 from tb where Name like '%'+@S1+'%' ";
		$vm.autocomplete($('#Project_Code__ID'),sql,function(key,value,value3){
			//$("#F__ID input[name=Project_Code]").val($vm.text(value));
			$vm.vm.proj_uid=value;
			$vm.vm.proj_status=value3;
		})
		//-------------------------------------
		sql="with tb as (select name=JSON_VALUE(Information,'$.Country'),value2=uid from [TABLE-"+$vm.module_list['country-form'].table_id+"])";
		sql+=" select top 10 name,value=name,value2 from tb where Name like '%'+@S1+'%' ";
		$vm.autocomplete($('#Country__ID'),sql,function(key,value){
			//$("#F__ID input[name=Country]").val($vm.text(value));
		})
		//------------------------
		sql="with tb as (select name=JSON_VALUE(Information,'$.Funding_Source'),value2=uid from [TABLE-"+$vm.module_list['funding-source-data'].table_id+"])";
		sql+=" select top 10 name,value=name,value2 from tb where Name like '%'+@S1+'%' ";
		$vm.autocomplete($('#Source__ID'),sql,function(key,value){
			//$("#F__ID input[name=Country]").val($vm.text(value));
		})
		//------------------------
		//year dropdown
		var $List=$('#FY__ID');
		var $List1=$('#FY_start__ID');
		var $List2=$('#FY_end__ID');
		var today = new Date();
		var mm = today.getMonth()+1; //January is 0!
		var m=0; if(mm>6) m=-1;
		var y=today.getFullYear()%100;
		for(var i=-2;i<7;i++){
			var txt='FY'+(y-i-1).toString()+(y-i).toString();
			if(i==m) {
				$List.append(  $('<option selected></option>').val(txt).html(txt));
				$List1.append(  $('<option></option>').val(txt).html(txt));
				$List2.append(  $('<option></option>').val(txt).html(txt));
			}
			else {
				$List.append(  $('<option></option>').val(txt).html(txt)  );
				$List1.append(  $('<option></option>').val(txt).html(txt)  );
				$List2.append(  $('<option></option>').val(txt).html(txt)  );
			}
		}
		//---------------------------------------------
		$('#button_project__ID').on('click',function(){
			$vm.load_module_v2("project-single-form",$vm.root_layout_content_slot,{});
		})
		//-------------------------------------
		$('#button_document__ID').on('click',function(){
			$vm.vm.proj_code=$('#Project_Code__ID').val();
			$vm.load_module_v2("project-single-document-data",$vm.root_layout_content_slot,{});
		})
		//-------------------------------------
		$('#button_proposal__ID').on('click',function(){
			$vm.vm.proj_code=$('#Project_Code__ID').val();
			$vm.load_module_v2("project-single-proposal-variation-data",$vm.root_layout_content_slot,{});
		})
		//-------------------------------------
		$('#button_actual_spending__ID').on('click',function(){
			$vm.vm.proj_code=$('#Project_Code__ID').val();
			$vm.load_module_v2("project-single-actual-spending-data",$vm.root_layout_content_slot,{});
		})
		//-------------------------------------
		$('#button_pending_funds__ID').on('click',function(){
			$vm.vm.proj_code=$('#Project_Code__ID').val();
			$vm.load_module_v2("project-single-pending-funds-data",$vm.root_layout_content_slot,{});
		})
		$('#button_budget_history__ID').on('click',function(){
			$vm.vm.proj_code=$('#Project_Code__ID').val();
			$vm.load_module_v2("budget-history",$vm.root_layout_content_slot,{});
		})
		$('#budget_and_actual_by_source__ID').on('click',function(){
			$vm.vm.proj_code=$('#Project_Code__ID').val();
			$vm.vm.fy=$('#FY__ID').val();
			$vm.load_module_v2("budget-and-actual-by-source",$vm.root_layout_content_slot,{});
		})
		$('#quarterly_budget_and_actual__ID').on('click',function(){
			$vm.vm.country=$('#Country__ID').val();
			$vm.vm.fy=$('#FY__ID').val();
			$vm.load_module_v2("quarterly-budget-and-actual",$vm.root_layout_content_slot,{});
		})
		$('#button_quarterly_projection__ID').on('click',function(){
			$vm.vm.country=$('#Country__ID').val();
			$vm.load_module_v2("quarterly-projection-single-data",$vm.root_layout_content_slot,{});
		})
		$('#country_project_summary__ID').on('click',function(){
			$vm.vm.country=$('#Country__ID').val();
			$vm.load_module_v2("country-project-summary",$vm.root_layout_content_slot,{});
		})
		$('#quarterly_budget_and_actual__ID').on('click',function(){
			$vm.vm.country=$('#Country__ID').val();
			$vm.vm.fy=$('#FY__ID').val();
			$vm.load_module_v2("quarterly-budget-and-actual",$vm.root_layout_content_slot,{});
		})
		$('#country_budget_and_actual_by_source__ID').on('click',function(){
			$vm.vm.country='Papua New Guinea'
//			$vm.vm.country=$('#Country__ID').val();
			$vm.vm.fy=$('#FY__ID').val();
			$vm.load_module_v2("country-budget-and-actual-by-source",$vm.root_layout_content_slot,{});
		})
		$('#summary_of_confirmed_funds__ID').on('click',function(){
			$vm.vm.country='Vietnam'
//			$vm.vm.country=$('#Country__ID').val();
			$vm.vm.fy=$('#FY__ID').val();
			$vm.vm.source='ANCP';
//			$vm.vm.source=$('#Source__ID').val();
			$vm.load_module_v2("summary-of-confirmed-funds",$vm.root_layout_content_slot,{});
		})
		$('#country_budget_summary__ID').on('click',function(){
			$vm.vm.country='Papua New Guinea'
//			$vm.vm.country=$('#Country__ID').val();
			$vm.vm.fy_start=$('#FY_start__ID').val();
			$vm.vm.fy_end=$('#FY_end__ID').val();
			$vm.load_module_v2("country-budget-summary",$vm.root_layout_content_slot,{});
		})
		$('#country_actual_summary__ID').on('click',function(){
			$vm.vm.country='Papua New Guinea'
//			$vm.vm.country=$('#Country__ID').val();
			$vm.vm.fy_start=$('#FY_start__ID').val();
			$vm.vm.fy_end=$('#FY_end__ID').val();
			$vm.load_module_v2("country-actual-summary",$vm.root_layout_content_slot,{});
		})
	}
</script>
<style>
#D__ID{
  height:100%;
  animation: vm_module_fadein 1.0s;
  overflow: auto;
}
</style>
VmInclude:__CURRENT_PATH__/task-form.css
</div>
